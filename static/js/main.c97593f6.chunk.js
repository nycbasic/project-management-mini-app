(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{142:function(e,t,a){e.exports=a(425)},150:function(e,t,a){},425:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(79),l=a.n(o),s=(a(147),a(149),a(150),a(28)),c=a(5),i=a(6),d=a(8),u=a(7),m=a(9),p=a(426),h=a(430),f=a(3),g=a(2),E=a.n(g),y=a(34),v=a.n(y),b="GET_ERRORS",j=function(e){return function(t){return t({type:"BODY_LOADING",payload:e})}},k=function(e,t){return function(a){return a({type:"MODAL_LOADING",payload:{val:e,status:t}})}};function N(e){return e?E.a.defaults.headers.common.Authorization=e:delete E.a.defaults.headers.common.Authorization}var C="https://mini-pm-tool-api.onrender.com",S=function(e,t){return function(a){a(j(!0)),E.a.post("".concat(C,"/api/users/signup"),e).then(function(e){var n=e.data.token;n&&(N(n),localStorage.setItem("jwt",n),a(w(v()(n))),a(j(!1)),t.push("/dashboard"))}).catch(function(e){a({type:b,payload:e.response.data}),a(j(!1))})}},w=function(e){return function(t){Date.now()/1e3>e.exp?t(T()):t({type:"SET_CURRENT_USER",payload:e})}},T=function(){return function(e){N(!1),localStorage.clear(),e({type:"SET_CURRENT_USER",payload:{}}),e({type:"CLEAR_TASKS",payload:""}),e({type:"CLEAR_PROJECTS",payload:[]})}},P=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.auth,t=e.isAuthenticated,a=e.user,n=this.props,o=n.logoutUser,l=n.history;return r.a.createElement("nav",{className:"navbar navbar-expand-lg"},r.a.createElement("div",{className:"container"},r.a.createElement(p.a,{className:"navbar-brand",to:t?"/dashboard":"/"},"Mini PM Tool"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("i",{className:"fas fa-bars"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},t?r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.a,{onClick:function(){return o()},className:"nav-link",to:"/login","data-toggle":"collapse","data-target":"#navbarSupportedContent"},r.a.createElement("img",{className:"rounded-circle",src:a.avatar,alt:a.name,style:{width:"25px",marginRight:"5px"},title:"You must have a Gravatar connected to your email to display an image"}),"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.a,{onClick:function(){return l.push("/signup")},className:"nav-link",to:"/signup","data-toggle":"collapse","data-target":"#navbarSupportedContent"},"Signup")))))))}}]),t}(n.Component);var _=Object(f.b)(function(e){return{auth:e.auth}},{logoutUser:T})(Object(h.a)(P)),O=a(429),A=a(431),x=a(427),R=function(){return function(e){return e({type:"CLEAR_ERRORS",payload:""})}},F=a(141),D=a(428);var U=Object(f.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(F.a)(e,["component","auth"]),o=a.user.exp,l=Date.now()/1e3>o,s=document.querySelector(".show");return localStorage.length>0&&!l?r.a.createElement(x.a,Object.assign({},n,{render:function(e){return r.a.createElement(t,e)}})):(s&&s.classList.remove("show"),console.log("RENDER: Private Redirect"),r.a.createElement(D.a,{to:"/"}))}),I=function(){return function(e){return e({type:"CLEAR_MSG",payload:""})}},M=function(e){var t=e.name,a=e.placeholder,n=e.value,o=e.error,l=e.info,s=e.type,c=e.onChange,i=e.onSelect,d=e.disabled,u=e.title;return r.a.createElement("div",{className:"form-group"},u&&r.a.createElement("label",{htmlFor:u},u),r.a.createElement("input",{type:s,className:o?"is-invalid form-control":"form-control",placeholder:a,onSelect:i,onChange:c,name:t,value:n,disabled:d}),o?o&&r.a.createElement("div",{className:"invalid-feedback"},o):l&&r.a.createElement("small",{className:"form-text text-muted"},l))},L=a(57),G=a.n(L),K=a(13),q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleLoginSubmit=function(e){e.preventDefault();var t=a.props,n=t.loginEmail,r=t.loginPassword,o=t.loginUser,l=t.clearErrors,s=t.clearFlashMsg;o({email:n,password:r},a.props.history),l(),s()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.errors,t=e.email,a=e.password,n=this.props.flash.msg,o=this.props,l=o.onFieldChange,s=o.onSelectClear,c=o.loginEmail,i=o.loginPassword;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"flash"},n&&r.a.createElement(K.Animated,{animationIn:"fadeIn",animationOut:"fadeOut"},r.a.createElement(G.a,{duration:4e3},r.a.createElement("div",{className:"alert alert-success"},n)))),r.a.createElement("form",{onSubmit:this.handleLoginSubmit},r.a.createElement("h3",null,"Please Log-in!"),r.a.createElement(M,{title:"Email Address",type:"text",name:"email",placeholder:"Enter your email address",value:c,onSelect:s,onChange:l,error:t}),r.a.createElement(M,{title:"Password",type:"password",name:"password",placeholder:"Enter your password",value:i,onChange:l,onSelect:s,error:a}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Log-in"),r.a.createElement("small",{className:"form-text text-muted"},"Forgot your ",r.a.createElement(p.a,{to:"/password"},"password"),"? Create an"," ",r.a.createElement(p.a,{to:"/signup"},"account"),"!")))))}}]),t}(n.Component);var W=Object(f.b)(function(e){return{flash:e.flash,auth:e.auth,loading:e.loading}},{loginUser:function(e,t){return function(a){a(j(!0)),E.a.post("".concat(C,"/api/users/login"),e).then(function(e){var n=e.data,r=n.msg,o=n.token;o&&(N(o),localStorage.setItem("jwt",o),a(w(v()(o))),a(j(!1)),t.push("/dashboard")),r&&(a({type:"FLASH_MSG",payload:e.data}),a(j(!1)))}).catch(function(e){console.log("FROM AUTH ACTION - LOGIN USER:",e),a({type:b,payload:e.response.data}),a(j(!1))})}},clearErrors:R,clearFlashMsg:I})(q),V=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onFieldChange,a=e.onSelectClear,n=e.loginEmail,o=e.loginPassword,l=e.errors;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home"},r.a.createElement(K.Animated,{animationIn:"bounceInUp"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-7"},r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"Manage your projects"),r.a.createElement("p",null,"A simple application that helps manage your projects that you're currently working on. Create new projects, new tasks, and update them as complete!"))),r.a.createElement("div",{className:"col-5"},r.a.createElement(W,Object.assign({},this.props,{errors:l,onFieldChange:t,onSelectClear:a,loginEmail:n,loginPassword:o}))))))))}}]),t}(n.Component),J=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSignUpSubmit=function(e){e.preventDefault();var t=a.props,n=t.signUpFullName,r=t.signUpEmail,o=t.signUpPassword,l=t.signUpPassword2;(0,a.props.onCreateUser)({fullName:n,email:r,password:o,password2:l},a.props.history)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.clearErrors,a=e.clearFlashMsg;t(),a()}},{key:"render",value:function(){var e=this.props.errors,t=e.fullName,a=e.email,n=e.password,o=e.password2,l=this.props,s=l.onSelectClear,c=l.onFieldChange,i=l.onFormClear,d=l.signUpFullName,u=l.signUpEmail,m=l.signUpPassword,p=l.signUpPassword2;return r.a.createElement(r.a.Fragment,null,r.a.createElement(K.Animated,{animationIn:"bounceInLeft"},r.a.createElement("div",{className:"signup"},r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSignUpSubmit},r.a.createElement("h3",null,"Please Sign Up!"),r.a.createElement(M,{title:"Full Name",type:"text",name:"fullName",placeholder:"Enter Your Full Name",value:d,onChange:c,onSelect:s,error:t}),r.a.createElement(M,{title:"Email Address",type:"text",name:"email",placeholder:"Enter your email address",value:u,onChange:c,onSelect:s,info:"We'll never share your email with anyone else",error:a}),r.a.createElement(M,{title:"Password",type:"password",name:"password",placeholder:"Enter your password",value:m,onChange:c,onSelect:s,info:"Use 8 or more characters with a mix of letters, numbers & symbols",error:n}),r.a.createElement(M,{title:"Confirm Password",type:"password",name:"password2",placeholder:"Please confirm your password",value:p,onChange:c,onSelect:s,info:"Please make sure your confirmation password matches",error:o}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),r.a.createElement("button",{onClick:i,className:"btn btn-danger"},"Reset"))))))}}]),t}(n.Component),Y=Object(f.b)(null,{createUser:S,clearErrors:R,clearFlashMsg:I})(J),H=a(12),B=a.n(H),z=function(){return function(e){e({type:"GET_PROJECTS",payload:{projects:[],loading:!0}}),E.a.get("".concat(C,"/api/projects/")).then(function(t){e({type:"GET_PROJECTS",payload:{projects:t.data,loading:!1}})}).catch(function(e){e&&console.log(e)})}},$=function(){return function(e){e({type:"CLEAR_TASKS",payload:!0})}},Q=a(137),X=a.n(Q),Z=function(e){var t=e.project_id,a=void 0===t?"":t,n=e.errors,o=e.inputType,l=e.button,s=l.action,c=l.clear,i=l.action_name,d=e.inputTitle,u=e.inputNameTitle,m=e.inputDescTitle,p=e.onNameChange,h=e.textFieldValue,f=e.textFieldPlaceholder,g=e.onWysiwygChange,E=e.wysiwygValue,y=e.wysiwygPlaceholder;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},d),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},u),r.a.createElement("input",{onChange:p,value:h,type:"text",className:"".concat(n.name&&"is-invalid"," form-control"),id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:f}),n.name&&r.a.createElement("div",{className:"invalid-feedback"},n.name)),function(e){switch(e){case"task":return!0;default:return!1}}(o)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleFormControlTextarea1"},m),r.a.createElement(X.a,{value:E,onChange:g,placeholder:y})),n.text&&r.a.createElement("label",{className:"error"},n.text)))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{onClick:function(){return c()},type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cancel"),r.a.createElement("button",{onClick:a?function(){return s(a)}:function(){return s()},type:"button",className:"btn btn-primary"},i)))},ee=function(e){var t=e.project_id,a=void 0===t?"":t,n=e.inputTitle,o=e.inputMessageOne,l=void 0===o?"":o,s=e.inputMessageTwo,c=void 0===s?"":s,i=e.button,d=i.action,u=i.clear,m=i.action_name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},n),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("p",null,l),r.a.createElement("p",null,c)),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{onClick:function(){return u()},type:"button",className:"btn btn-danger","data-dismiss":"modal",s:!0},"Cancel"),r.a.createElement("button",{onClick:a?function(){return d(a)}:function(){return d()},type:"button",className:"btn btn-primary","data-dismiss":"modal"},m)))},te=function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),r.a.createElement("p",null,"Loading....")))},ae=(a(294),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={},a.renderModalContent=function(e){var t=a.props,n=t.name,o=t.errors,l=t.text,s=t.project_id,c=t.onNameChange,i=t.onProjectSubmit,d=t.onDeleteAll,u=t.onProjectUpdate,m=t.onTaskSubmit,p=t.onDeleteAllTasks,h=t.onProjectEdit,f=t.onDeleteProject,g=t.onTaskEdit,E=t.onWysiwygChange,y=t.onActionClear;switch(e){case"create project":return r.a.createElement(Z,{inputType:"project",errors:o,button:{action:i,clear:y,action_name:"Create Project"},inputTitle:"Create a Project",inputNameTitle:"Name of Project",textFieldValue:n,textFieldPlaceholder:"Enter a Project Name",onNameChange:c});case"create task":return r.a.createElement(Z,{inputType:"task",errors:o,button:{action:m,clear:y,action_name:"Create Task"},inputTitle:"Create a Task",inputNameTitle:"Name of Task",textFieldValue:n,textFieldPlaceholder:"Enter a Task Name",onNameChange:c,inputDescTitle:"Enter Your Task Descriptions",wysiwygValue:l,wysiwygPlaceholder:"Please Enter a Detailed Task Desciption",onWysiwygChange:E});case"delete projects":return r.a.createElement(ee,{inputTitle:"Delete Projects",inputMessageOne:"Are you sure you want to delete all your projects?",button:{action:d,clear:y,action_name:"Continue"}});case"delete project":return r.a.createElement(ee,{project_id:s,inputTitle:"Delete Project",inputMessageOne:"Are you sure you want to delete this project? All task created in this project will be deleted",button:{action:f,clear:y,action_name:"Continue"}});case"delete tasks":return r.a.createElement(ee,{project_id:s,inputTitle:"Delete Tasks",inputMessageOne:"Are you sure you want to delete all you tasks?",button:{action:p,clear:y,action_name:"Continue"}});case"edit project":return r.a.createElement(Z,{project_id:s,errors:o,inputType:"project",inputTitle:"Edit Project Name",inputTitleName:"Rename Your Project",onNameChange:c,textFieldValue:n,button:{action:h,clear:y,action_name:"Submit"}});case"edit task":return r.a.createElement(Z,{errors:o,inputType:"task",inputTitle:"Edit a Task",inputTitleName:"Edit The Name of The Task",onNameChange:c,textFieldValue:n,textFieldPlaceholder:"Enter the new name of the task",inputDescTitle:"Edit The Details of The Task",onWysiwygChange:E,wysiwygValue:l,wysiwygPlaceholder:"Enter the new details of your task",button:{action:g,clear:y,action_name:"Submit"}});case"complete projects":return r.a.createElement(ee,{project_id:s,inputTitle:"Mark Project Complete",inputMessageOne:"All tasks are marked completed, would you like to mark your project as completed?",inputMessageTwo:"All tasks within the project will be marked complete and cannot be reverted back to its previous status and edited.",button:{action:u,clear:y,action_name:"Continue"}});default:return null}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.action;return this.props.loading.load.status,r.a.createElement("div",{className:"modal fade",id:"default-modal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},this.props.loading.load.modal&&r.a.createElement("div",{className:"loader"},r.a.createElement(te,null)),r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},this.renderModalContent(e))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.name,n=e.text;return"object"!==typeof e.errors||0!==a.length&&0!==n.length?"object"===typeof e.errors&&0===a.length&&0===n.length?null:"object"!==typeof e.errors&&a.length>0&&n.length>0?null:a.length>0||n.length>0?null:0==typeof e.errors&&a.length>0&&0===n.length||0==typeof e.errors&&0===a.length&&n.length>0?null:"PENDING"===e.loading.load.status?null:"FAILED"===e.loading.load.status?null:(B()("#exampleModal").modal("hide"),{}):null}}]),t}(n.Component));var ne=Object(f.b)(function(e){return{loading:e.loading}})(ae);var re=Object(f.b)(function(e){return{loading:e.loading}})(function(e){var t=e.project_id,a=e.onProjectUpdate,n=e.onActionClear;return r.a.createElement("div",{className:"modal fade",id:"task-completed-modal",tabIndex:"-1",role:"dialog","aria-labelledby":"task-completed-modal","aria-hidden":"true"},e.loading.load.modal&&r.a.createElement("div",{className:"loader"},r.a.createElement(te,null)),r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement(ee,{project_id:t,inputTitle:"Mark Project Complete",inputMessageOne:"All tasks are marked completed, would you like to mark your project as completed?",inputMessageTwo:"All tasks within the project will be marked complete and cannot be reverted back to its previous status and edited.",button:{action:a,clear:n,action_name:"Continue"}}))))}),oe=a(58),le=a.n(oe);function se(e){for(var t=0,a=[];e>t;)a.push("div"),t++;return a}var ce=function(){var e=se(3);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"project-shimmer-container"},r.a.createElement(le.a,null,e.map(function(e,t){return r.a.createElement("div",{key:t,className:"project-shimmer-rectangle"})}))))};var ie=Object(f.b)(function(e){return{tasks:e.tasks}})(function(e){var t=e.onAction,a=e.onProjectClick,n=e.projects,o=n.projects,l=n.loading,s=e.project_name,c=o.filter(function(e){return!e.completed&&e.todos.length<1});return r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,"New Projects: ",c.length),r.a.createElement("div",{className:"card projects"},r.a.createElement("div",{className:"card-header"},"New Projects",r.a.createElement("i",{onClick:function(){return t("create project")},className:"fas fa-plus","data-toggle":"modal","data-target":"#default-modal"}),o.length>0?r.a.createElement("i",{onClick:function(){return t("delete projects")},className:"fas fa-trash-alt","data-toggle":"modal","data-target":"#default-modal"}):null),r.a.createElement("ul",{className:"list-group list-group-flush",id:"list-tab",role:"tablist"},l&&0===c.length?r.a.createElement(ce,null):c.length<1?r.a.createElement("p",null,"No projects to display"):c.map(function(e){return r.a.createElement("li",{key:e._id,className:s===e.name?"list-group-item active":"list-group-item"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},r.a.createElement("a",{name:s,onClick:function(){return a(e._id,e.name)},id:"list-home-list",className:s===e.name?"active":"","data-toggle":"list",href:"#list-home",role:"tab","aria-controls":"home"},e.name)),r.a.createElement("div",{className:"dropdown col-4"},r.a.createElement("i",{onClick:function(){return a(e._id,e.name)},className:"far fa-caret-square-down",id:"dropdownMenu2","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"dropdownMenu2"},r.a.createElement("button",{className:"dropdown-item",type:"button","data-toggle":"modal","data-target":"#default-modal",onClick:function(){return t("edit project",e._id,null,e.name)}},"Edit"),r.a.createElement("button",{className:"dropdown-item",type:"button","data-toggle":"modal","data-target":"#default-modal",onClick:function(){return t("delete project",e._id)}},"Delete")),r.a.createElement("span",{className:"badge badge-".concat(e.completed?"success":0===e.todos.length?"info":"danger")},e.completed?"Completed":0===e.todos.length?"New Project":"In Progress..."))))}))))}),de=function(e){var t=e.onAction,a=e.onProjectClick,n=e.projects,o=n.projects,l=n.loading,s=e.project_name,c=o.filter(function(e){return e.completed});return r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,"Projects Completed: ",c.length),r.a.createElement("div",{className:"card projects"},r.a.createElement("div",{className:"card-header"},"Completed"),r.a.createElement("ul",{className:"list-group list-group-flush",id:"list-tab",role:"tablist"},l&&0===c.length?r.a.createElement(ce,null):c.length<1?r.a.createElement("p",null,"No projects to display"):c.map(function(e){return r.a.createElement("li",{key:e._id,className:s===e.name?"list-group-item active":"list-group-item"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},r.a.createElement("a",{name:e._id,onClick:function(){return a(e._id,e.name)},id:"list-home-list",className:s===e.name?"active":"","data-toggle":"list",href:"#list-home",role:"tab","aria-controls":"home"},e.name)),r.a.createElement("div",{className:"dropdown col-4"},r.a.createElement("i",{onClick:function(){return a(e._id,e.name)},className:"far fa-caret-square-down",id:"dropdownMenu2","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"dropdownMenu2"},r.a.createElement("button",{className:"dropdown-item",type:"button","data-toggle":"modal","data-target":"#default-modal",onClick:function(){return t("delete project",e._id)}},"Delete")),r.a.createElement("span",{className:"badge badge-".concat(e.completed?"success":0===e.todos.length?"info":"danger")},e.completed?"Completed":0===e.todos.length?"New Project":"In Progress..."))))}))))},ue=function(e){var t=e.onAction,a=e.onProjectClick,n=e.projects,o=n.projects,l=n.loading,s=e.project_name,c=o.filter(function(e){return e.todos.length>0&&!e.completed?e:null});return r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,"Projects In Progress: ",c.length),r.a.createElement("div",{className:"card projects"},r.a.createElement("div",{className:"card-header"},"In Progress"),r.a.createElement("ul",{className:"list-group list-group-flush",id:"list-tab",role:"tablist"},l&&0===c.length?r.a.createElement(ce,null):c.length<1?r.a.createElement("p",null,"No projects to display"):c.map(function(e){return r.a.createElement("li",{key:e._id,className:s===e.name?"list-group-item active":"list-group-item"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},r.a.createElement("a",{name:s,onClick:function(){return a(e._id,e.name)},className:s===e.name?"active":"",id:"list-home-list","data-toggle":"list",href:"#list-home",role:"tab","aria-controls":"home"},e.name)),r.a.createElement("div",{className:"dropdown col-4"},r.a.createElement("i",{onClick:function(){return a(e._id,e.name)},className:"far fa-caret-square-down",id:"dropdownMenu2","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"dropdownMenu2"},r.a.createElement("button",{className:"dropdown-item",type:"button","data-toggle":"modal","data-target":"#default-modal",onClick:function(){return t("complete projects",e._id)}},!e.completed&&"Mark as Completed"),r.a.createElement("button",{className:"dropdown-item",type:"button","data-toggle":"modal","data-target":"#default-modal",onClick:function(){return t("edit project",e._id,null,e.name)}},"Edit"),r.a.createElement("button",{className:"dropdown-item",type:"button","data-toggle":"modal","data-target":"#default-modal",onClick:function(){return t("delete project",e._id)}},"Delete")),r.a.createElement("span",{className:"badge badge-".concat(e.completed?"success":0===e.todos.length?"info":"danger")},e.completed?"Completed":0===e.todos.length?"New Project":"In Progress..."))))}))))},me=a(139),pe=a.n(me),he=function(){var e=se(11);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"task-shimmer-container"},r.a.createElement(le.a,null,e.map(function(e,t){return r.a.createElement("div",{key:t,className:"task-shimmer-rectangle"})}))))},fe=function(e){var t=e.onAction,a=e.onCompletedTaskStatus,n=e.onRevertTaskStatus,o=e.onDeleteTask,l=e.tasks,s=l.tasks,c=l.loading,i=e.project_id,d=e.project_name,u=e.projects.projects.some(function(e){return e._id===i&&!0===e.completed});return r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,"You're viewing: ",d),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},"Tasks",u?null:r.a.createElement("i",{onClick:function(){return t("create task",i)},className:"fas fa-plus ".concat(i?"show":"hide"),"data-toggle":"modal","data-target":"#default-modal"}),s.length<1||u?null:r.a.createElement("i",{onClick:function(){return t("delete tasks",i)},className:"fas fa-trash-alt ".concat(i?"show":"hide"),"data-toggle":"modal","data-target":"#default-modal"})),r.a.createElement("div",{className:"card-body"},c&&0===s.length?r.a.createElement(he,null):0===s.length?r.a.createElement("p",{className:"task-default-msg"},"Create a Task or Select a Project"):s.length>0&&r.a.createElement("div",{className:"accordion",id:"accordionExample"},s.map(function(e,l){return r.a.createElement("div",{className:"card tasks",key:"tasks-".concat(l)},r.a.createElement("div",{className:"card-header",id:"heading-".concat(l)},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10"},r.a.createElement("h2",{className:"mb-0"},r.a.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapse-".concat(l),"aria-expanded":"true","aria-controls":"collapseOne"},e.name))),r.a.createElement("div",{className:"icons-status col-2"},r.a.createElement("div",{className:e.completed?"status status-completed":"status"},r.a.createElement("span",{className:"badge badge-".concat(e.completed?"success":"danger")},e.completed?"Completed":"In Progress...")),u?null:r.a.createElement("div",{className:"icons"},r.a.createElement("ul",{className:"nav"},r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{onClick:e.completed?function(){return n(i,e._id)}:function(){return a(i,e._id)},className:"nav-item"},e.completed?r.a.createElement("i",{className:"fas fa-undo",title:"Revert"}):r.a.createElement("i",{className:"far fa-check-square",title:"Completed"})),e.completed?"":r.a.createElement("li",{onClick:function(){return t("edit task",i,e._id,e.name,e.text)},className:"nav-item","data-toggle":"modal","data-target":"#default-modal"},r.a.createElement("i",{className:"far fa-edit",title:"Edit"})),r.a.createElement("li",{onClick:function(){return o(i,e._id)},className:"nav-item"},r.a.createElement("i",{className:"far fa-trash-alt",title:"Delete"})))))))),r.a.createElement("div",{id:"collapse-".concat(l),className:"collapse","aria-labelledby":"heading-".concat(l),"data-parent":"#accordionExample"},r.a.createElement("div",{className:"card-body"},r.a.createElement(pe.a,{source:e.text,escapeHtml:!1}))))})))))},ge=a(20),Ee=a(35);var ye={isAuthenticated:!1,user:{}},ve={msg:""},be={msg:"",validToken:!1,expiredToken:!1,loading:!0},je={projects:[],loading:!1},ke={tasks:[],loading:!1,allCompleted:!1},Ne={load:{body:!1,modal:!1}},Ce=Object(ge.c)({auth:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_CURRENT_USER":return Object(Ee.a)({},t,{isAuthenticated:(e=a.payload,!(void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length)),user:a.payload,loading:!1});default:return t}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLEAR_ERRORS":return t.payload;default:return e;case b:return t.payload}},flash:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FLASH_MSG":case"CLEAR_MSG":return t.payload;default:return e}},reset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VALID_RESET_TOKEN":return{validToken:t.payload,loading:!1};case"INVALID_RESET_TOKEN":return Object(Ee.a)({},e,{expiredToken:t.payload,loading:!1});case"INVALID_RESET_MSG":return Object(Ee.a)({},e,{msg:t.payload});default:return e}},projects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROJECTS":return{projects:t.payload.projects,loading:t.payload.loading};case"CLEAR_PROJECTS":return{projects:t.payload,loading:!1};default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TASKS":return{tasks:t.payload.tasks,loading:t.payload.loading,allCompleted:t.payload.allCompleted};case"CLEAR_TASKS":return{tasks:[],loading:t.payload,allCompleted:!1};case"RESET COMPLETED TASKS":return{tasks:e.tasks,loading:e.loading,allCompleted:t.payload};default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BODY_LOADING":return{load:{body:t.payload,modal:!1}};case"MODAL_LOADING":return{load:{body:!1,modal:t.payload.val,status:t.payload.status}};default:return e}}}),Se=[a(140).a],we=Object(ge.e)(Ce,{},Object(ge.d)(ge.a.apply(void 0,Se)));var Te=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",text:"",action:"",target:"",project_id:"",project_name:"",task_id:"",task_name:"",task_text:"",status:"",tasks:[]},a.handleNameChange=function(e){var t=a.props,n=t.clearErrors;t.errors.name&&n(),a.setState({name:e.target.value})},a.handleWysiwygChange=function(e){var t=a.props,n=t.clearErrors;t.errors.text&&n(),a.setState({text:e})},a.handleProjectClick=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,a.props.getTasks)(e),a.setState({project_id:e,project_name:t})},a.handleProjectSubmit=function(){var e=a.props,t=e.createProject,n=e.projects.projects,r=e.sendError,o=e.clearErrors,l=e.errors,s=a.state.name;if(n.map(function(e){return e.name}).some(function(e){return e===s}))return r({name:"Project already exists!"}),null;l.name&&o(),t({name:s}),0!==s.length&&a.setState({name:"",action:""})},a.handleProjectEdit=function(e){var t=a.props,n=t.editProject,r=t.projects.projects,o=t.sendError,l=t.clearErrors,s=t.errors,c=a.state,i=c.name,d=c.project_name,u=r.map(function(e){return e.name}).some(function(e){return e===i});if(d===i)return o({name:"Cannot use the previous project name!"}),null;if(u&&d!==i)return o({name:"Project already exists!"}),null;s.name&&l();var m={name:i};n(e,m),a.setState({project_name:m.name,name:""})},a.projectUpdate=function(){var e=a.props,t=e.getProjects,n=e.projects;t(),a.setState({projects:n,tasks:""})},a.handleTaskSubmit=function(){var e=a.props,t=e.createTask,n=e.tasks.tasks,r=e.sendError,o=a.state,l=o.name,s=o.text,c=o.project_id,i={name:l,text:s},d=n.map(function(e){return e.name}).some(function(e){return e===l}),u=["<p><br></p>","<h1><br></h1>","<h2><br></h2>","<h3><br></h3>",'<p><strong><span class="ql-cursor">\ufeff</span></strong></p>','<p><em><span class="ql-cursor">\ufeff</span></em></p>','<p><u><span class="ql-cursor">\ufeff</span></u></p>','<p><strong><em><span class="ql-cursor">\ufeff</span></em></strong></p>','<p><strong><u><span class="ql-cursor">\ufeff</span></u></strong></p>','<p><em><u><span class="ql-cursor">\ufeff</span></u></em></p>','<p><strong><em><u><span class="ql-cursor">\ufeff</span></u></em></strong></p>'];return!d||""!==s&&"<p><br></p>"!==s?d?(r({name:"Task already exists!"}),!1):u.includes(s)&&""===l?(r({name:"Please enter a name for the task!",text:"Please enter in a description of a task!"}),null):u.includes(s)?(r({text:"Please enter in a description of task!"}),null):(t(c,i),void(0!==l.length&&0!==s.length&&a.setState({name:"",text:"",action:"",tasks:n}))):(r({name:"Task already exists!",text:"Please enter in a description of a task!"}),null)},a.handleAction=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=a.props,l=o.clearErrors,s=o.resetTasks,c=o.errors;s(),c&&l(),a.setState({action:e,name:n,text:r,task_id:t,task_name:n,task_text:r})},a.handleClearAction=function(){a.setState({action:"",name:"",text:""})},a.handleDelete=function(){a.props.deleteProjects(),a.setState({id:""})},a.handleDeleteProject=function(e){a.props.deleteProject(e),a.handleClearAction()},a.handleProjectUpdate=function(e){var t=a.props,n=t.tasks.tasks;(0,t.updateProject)(e,n.map(function(e){return e.completed||(e.completed=!0),e})),a.setState({tasks:"",project_name:"",project_id:""}),a.handleClearAction()},a.handleAllCompletedTasks=function(e){a.setState({action:e})},a.handleCompletedTaskStatus=function(e,t){(0,a.props.updateTaskStatus)(e,t)},a.handleRevertTaskStatus=function(e,t){(0,a.props.updateTaskStatus)(e,t)},a.handleDeleteTasks=function(e){a.props.deleteTasks(e),a.setState({tasks:""})},a.handleDeleteTask=function(e,t){a.props.deleteTask(e,t),a.handleClearAction()},a.handleEditTask=function(){var e=a.state,t=e.name,n=e.text,r=e.project_id,o=e.task_id,l=e.task_name,s=e.task_text,c=a.props,i=c.tasks.tasks,d=c.editTask,u=c.sendError,m=i.some(function(e){return e.name===t}),p=["<p><br></p>","<h1><br></h1>","<h2><br></h2>","<h3><br></h3>",'<p><strong><span class="ql-cursor">\ufeff</span></strong></p>','<p><em><span class="ql-cursor">\ufeff</span></em></p>','<p><u><span class="ql-cursor">\ufeff</span></u></p>','<p><strong><em><span class="ql-cursor">\ufeff</span></em></strong></p>','<p><strong><u><span class="ql-cursor">\ufeff</span></u></strong></p>','<p><em><u><span class="ql-cursor">\ufeff</span></u></em></p>','<p><strong><em><u><span class="ql-cursor">\ufeff</span></u></em></strong></p>'];return l===t&&s===n?(u({name:"Cannot use previous task name!",text:"Cannot use previous description!"}),null):p.includes(n)&&""===t?(u({name:"Please enter a task name!",text:"Please enter a description!"}),null):""===t?(u({name:"Please enter a task name!"}),null):m&&l!==t?(u({name:"Task already exists!"}),null):p.includes(n)||""===n?(u({text:"Please enter a description!"}),null):(d(r,o,{name:t,text:n}),a.setState({name:"",text:""}),void a.handleClearAction())},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.getProjects;localStorage.jwt?(!function(){try{we.dispatch(w(v()(localStorage.jwt)))}catch(e){T()}}(),N(localStorage.jwt),e()):T()}},{key:"render",value:function(){var e=this.props.auth.user,t=e.fullName,a=e.avatar;return r.a.createElement("div",{className:"dashboard"},r.a.createElement(K.Animated,{animationIn:"bounceIn"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"user"},r.a.createElement("h1",null,r.a.createElement("img",{className:"rounded-circle",src:a,alt:t,title:"You must have a Gravatar connected to your email to display an image"}),"Welcome, ",t,"!"),r.a.createElement("p",null,t,", your current projects are viewable below!"),r.a.createElement("p",null,"You have a total of ",this.props.projects.projects.length," ","projects.")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-5"},r.a.createElement(ie,Object.assign({},this.state,this.props,{onAction:this.handleAction,onProjectClick:this.handleProjectClick,onProjectUpdate:this.handleProjectUpdate,onProjectSort:this.handleProjectSort})),r.a.createElement(ue,Object.assign({},this.state,this.props,{onAction:this.handleAction,onProjectClick:this.handleProjectClick,onProjectUpdate:this.handleProjectUpdate,onProjectSort:this.handleProjectSort})),r.a.createElement(de,Object.assign({},this.state,this.props,{onAction:this.handleAction,onProjectClick:this.handleProjectClick,onProjectUpdate:this.handleProjectUpdate,onProjectSort:this.handleProjectSort}))),r.a.createElement("div",{className:"col-7"},r.a.createElement(fe,Object.assign({},this.state,this.props,{onAction:this.handleAction,onRevertTaskStatus:this.handleRevertTaskStatus,onCompletedTaskStatus:this.handleCompletedTaskStatus,onDeleteTask:this.handleDeleteTask})))))),r.a.createElement(ne,Object.assign({},this.state,this.props,{onNameChange:this.handleNameChange,onTextChange:this.handleTextChange,onWysiwygChange:this.handleWysiwygChange,onProjectSubmit:this.handleProjectSubmit,onProjectEdit:this.handleProjectEdit,onProjectUpdate:this.handleProjectUpdate,onTaskSubmit:this.handleTaskSubmit,onDeleteAll:this.handleDelete,onDeleteAllTasks:this.handleDeleteTasks,onDeleteProject:this.handleDeleteProject,onTaskEdit:this.handleEditTask,onActionClear:this.handleClearAction,onTasksClear:this.props.clearTasks})),this.props.tasks.allCompleted&&r.a.createElement(re,Object.assign({},this.props,this.state,{onActionClear:this.handleClearAction,onProjectUpdate:this.handleProjectUpdate})))}}]),t}(n.Component);var Pe=Object(f.b)(function(e){return{auth:e.auth,projects:e.projects,tasks:e.tasks,errors:e.errors}},{deleteUser:function(e){return function(t){E.a.delete("".concat(C,"/api/users/").concat(e)).then(function(e){N(!1),localStorage.clear(),t({type:"SET_CURRENT_USER",payload:{}}),t({type:"FLASH_MSG",payload:e.data})}).catch(function(e){t({type:b,payload:e.response.data})})}},getProjects:z,getTasks:function(e){return function(t){t(function(e){e({type:"CLEAR_TASKS",payload:!0})}),t(R()),E.a.get("".concat(C,"/api/projects/tasks/").concat(e)).then(function(e){e.data&&t({type:"GET_TASKS",payload:{tasks:e.data,loading:!1}})}).catch(function(e){t({type:b,payload:e.response.data})})}},createProject:function(e){return function(t){t(k(!0,"PENDING")),E.a.post("".concat(C,"/api/projects"),e).then(function(e){if(200===e.status)return t({type:"GET_PROJECTS",payload:{projects:e.data,loading:!1}}),B()("#default-modal").modal("hide"),"success"}).then(function(e){"success"===e&&(t({type:b,payload:""}),t(k(!1,"SUCCESS")))}).catch(function(e){401===e.response.status?t(T()):(t({type:b,payload:e.response.data}),t(k(!1,"FAILED")))})}},deleteProjects:function(){return function(e){e(k(!0,"PENDING")),E.a.delete("".concat(C,"/api/projects")).then(function(t){e({type:"GET_PROJECTS",payload:{projects:t.data,loading:!1}}),e({type:"CLEAR_TASKS",payload:!1}),e(k(!1,"SUCCESS")),B()("#default-modal").modal("hide")}).catch(function(t){if(401!==t.response.status)return!1;e(k(!1,"")),e(T())})}},deleteProject:function(e){return function(t){t({type:"GET_PROJECTS",payload:{projects:[],loading:!0}}),E.a.delete("".concat(C,"/api/projects/").concat(e)).then(function(e){t(z()),t({type:"CLEAR_TASKS",payload:!1}),B()("#default-modal").modal("hide")}).catch(function(e){if(401!==e.response.status)return!1;t(T())})}},updateProject:function(e,t){return function(a){a(k(!0,"PENDING")),E.a.put("".concat(C,"/api/projects/status/").concat(e),t).then(function(){a(z()),a({type:"CLEAR_TASKS",payload:!1}),a(k(!1,"SUCCESS")),B()("#default-modal").modal("hide")}).catch(function(e){401===e.response.status?a(T()):(a({type:b,payload:e.response.data}),a(k(!1,"FAILED")))})}},editProject:function(e,t){return function(a){a(k(!0,"PENDING")),E.a.put("".concat(C,"/api/projects/").concat(e),t).then(function(e){a({type:"GET_PROJECTS",payload:{projects:e.data,loading:!1}}),a(k(!1,"SUCCESS")),B()("#default-modal").modal("hide")}).catch(function(e){401===e.response.status?a(T()):(a({type:b,payload:e.response.data}),a(k(!1,"FAILED")))})}},createTask:function(e,t){return function(a){a(k(!0,"PENDING")),E.a.post("".concat(C,"/api/projects/tasks/").concat(e),t).then(function(e){return e.data&&(a(R()),a({type:"GET_TASKS",payload:{tasks:e.data,loading:!1}}),a(k(!1,"SUCCESS")),B()("#default-modal").modal("hide")),e.data}).then(function(e){return e.length<=1&&(a(z()),a(k(!1,"SUCCESS"))),a(k(!1,"")),!1}).catch(function(e){a({type:b,payload:e.response.data}),a(k(!1,"FAILED"))})}},deleteTasks:function(e){return function(t){t(k(!0,"PENDING")),E.a.delete("".concat(C,"/api/projects/tasks/").concat(e)).then(function(e){return t({type:"GET_TASKS",payload:{tasks:e.data,loading:!1}}),B()("#default-modal").modal("hide"),e.data}).then(function(e){return e.length<1&&t(z()),t(k(!1,"SUCCESS")),!1}).catch(function(e){t({type:b,payload:e.response.data})})}},deleteTask:function(e,t){return function(a){a({type:"GET_TASKS",payload:{tasks:[],loading:!0}}),E.a.delete("".concat(C,"/api/projects/tasks/").concat(e,"/").concat(t)).then(function(e){return a({type:"GET_TASKS",payload:{tasks:e.data,loading:!1}}),B()("#default-modal").modal("hide"),e.data}).then(function(e){return e.length<1&&a(z()),!1}).catch(function(e){a({type:b,payload:e.response.data})})}},editTask:function(e,t,a){return function(n){n(k(!0,"PENDING")),E.a.put("".concat(C,"/api/projects/tasks/").concat(e,"/").concat(t),a).then(function(e){n({type:"GET_TASKS",payload:{tasks:e.data,loading:!1}}),n(k(!1,"SUCCESS")),B()("#default-modal").modal("hide")}).catch(function(e){n({type:b,payload:e.response.data}),n(k(!1,"FAILED"))})}},clearTasks:$,resetTasks:function(){return function(e){e({type:"RESET COMPLETED TASKS",payload:!1})}},sendError:function(e){return function(t){return t({type:b,payload:e})}},updateTaskStatus:function(e,t){return function(a){a(j(!0)),E.a.put("".concat(C,"/api/projects/tasks/status/").concat(e,"/").concat(t)).then(function(e){var t=e.data.every(function(e){return!0===e.completed});a({type:"GET_TASKS",payload:{tasks:e.data,loading:!1,allCompleted:t}}),a(j(!1)),t&&B()("#task-completed-modal").modal("show")}).catch(function(e){a({type:b,payload:e}),a(j(!1))})}},clearErrors:R,setModalLoader:k})(Te),_e=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleResetSubmit=function(e){e.preventDefault();var t=a.props,n=t.resetEmail;(0,t.resetUser)({email:n})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.clearErrors,a=e.clearFlashMsg;t(),a()}},{key:"render",value:function(){var e=this.props,t=e.resetEmail,a=e.onFieldChange,n=e.onSelectClear,o=e.errors,l=this.props.flash.msg;return r.a.createElement("div",{className:"reset"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"flash"},l&&r.a.createElement(K.Animated,{animationIn:"fadeIn",animationOut:"fadeOut"},r.a.createElement(G.a,{duration:4e3},r.a.createElement("div",{className:"alert alert-success"},l)))),r.a.createElement(K.Animated,{animationIn:"bounceIn"},r.a.createElement("form",{onSubmit:this.handleResetSubmit},r.a.createElement("h3",null,"Password Reset"),r.a.createElement(M,{title:"Enter your email address",name:"email",value:t,info:"Make sure your email address already exist!",type:"text",onChange:a,onSelect:n,error:o.email}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")))))}}]),t}(n.Component);var Oe=Object(f.b)(function(e){return{flash:e.flash}},{resetUser:function(e){return function(t){t(R()),t(function(e){return e({type:"CLEAR_MSG",payload:""})}),E.a.post("".concat(C,"/api/users/forgot"),e).then(function(e){t({type:"FLASH_MSG",payload:e.data})}).catch(function(e){t({type:b,payload:e.response.data})})}},clearErrors:R,clearFlashMsg:I})(_e),Ae=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={password:"",password2:"",errors:{}},a.handleChange=function(e){a.setState(Object(s.a)({},e.target.name,e.target.value))},a.handleSelect=function(){(0,a.props.clearErrors)()},a.handleResetSubmit=function(e){e.preventDefault();var t=a.state,n=t.password,r=t.password2,o=a.props,l=o.history,s=o.match;(0,o.resetPassword)({password:n,password2:r},s.params.token,l),a.setState({password:"",password2:""})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.clearErrors,a=e.clearFlashMsg;t(),a()}},{key:"componentDidMount",value:function(){var e=this.props;(0,e.loadReset)(e.match.params.token)}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state,t=e.password,a=e.password2,n=e.errors,o=this.props.reset,l=o.validToken,s=o.loading,c=o.expiredToken,i=o.msg;return l&&!s?r.a.createElement("div",{className:"reset-form"},r.a.createElement("div",{className:"container"},r.a.createElement(K.Animated,{animationIn:"bounceIn"},r.a.createElement("form",{onSubmit:this.handleResetSubmit},r.a.createElement("h3",null,"Password Reset"),r.a.createElement(M,{title:"Enter your new password",name:"password",type:"password",info:"Use 8 or more characters with a mix of letters, numbers & symbols",value:t,onChange:this.handleChange,onSelect:this.handleSelect,error:n.password}),r.a.createElement(M,{title:"Confirm your new password",name:"password2",type:"password",info:"Please make sure your confirmation password matches!",value:a,onChange:this.handleChange,onSelect:this.handleSelect,error:n.password2}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Reset"))))):!l&&s?r.a.createElement(te,null):c?r.a.createElement("div",{className:"reset-error"},r.a.createElement(K.Animated,{animationIn:"bounceIn"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card"},r.a.createElement("h5",{className:"card-header"},"Unable to complete request"),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text"},i),r.a.createElement(p.a,{to:"/password",className:"btn btn-primary"},"Get new token")))))):void 0}}]),t}(n.Component);var xe=Object(f.b)(function(e){return{reset:e.reset,errors:e.errors,flash:e.flash}},{loadReset:function(e){return function(t){E.a.get("".concat(C,"/api/users/reset/").concat(e)).then(function(e){var a=e.data,n=a.validToken,r=a.expiredToken,o=a.msg;n?t({type:"VALID_RESET_TOKEN",payload:n}):r&&t({type:"INVALID_RESET_TOKEN",payload:r}),o&&t({type:"INVALID_RESET_MSG",payload:o})}).catch(function(e){t({type:b,payload:e.response.data})})}},resetPassword:function(e,t,a){return function(n){n(R()),n(function(e){return e({type:"CLEAR_MSG",payload:""})}),E.a.post("".concat(C,"/api/users/reset/").concat(t),e).then(function(e){n({type:"FLASH_MSG",payload:e.data})}).then(function(){a.push("/login")}).catch(function(e){n({type:b,payload:e.response.data})})}},clearErrors:R,clearFlashMsg:I})(Ae),Re=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={fullName:"",email:"",password:"",password2:"",errors:""},a.handleFieldChange=function(e){a.setState(Object(s.a)({},e.target.name,e.target.value)),"object"===typeof a.state.errors&&"object"===typeof a.props.errors&&(R(),a.setState({errors:""}))},a.handleClearSelectErrors=function(){(0,a.props.clearErrors)()},a.handleClearForm=function(e){var t=a.props.clearErrors;e.preventDefault(),a.setState({fullName:"",email:"",password:"",password2:""}),t()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this;return r.a.createElement(O.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(_,null),r.a.createElement("div",{className:"main"},this.props.loading.load.body&&r.a.createElement("div",{className:"loader"},r.a.createElement(te,null)),r.a.createElement(A.a,null,r.a.createElement(x.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(V,Object.assign({},t,{onFieldChange:e.handleFieldChange,onSelectClear:e.handleClearSelectErrors,loginEmail:e.state.email,loginPassword:e.state.password,errors:e.state.errors}))}}),r.a.createElement(x.a,{path:"/signup",render:function(t){return r.a.createElement(Y,Object.assign({},t,{onCreateUser:e.props.createUser,onFieldChange:e.handleFieldChange,onSelectClear:e.handleClearSelectErrors,onFormClear:e.handleClearForm,signUpFullName:e.state.fullName,signUpEmail:e.state.email,signUpPassword:e.state.password,signUpPassword2:e.state.password2,errors:e.state.errors}))}}),r.a.createElement(x.a,{path:"/login",render:function(t){return r.a.createElement(W,Object.assign({},t,{onFieldChange:e.handleFieldChange,onSelectClear:e.handleClearSelectErrors,onFormClear:e.handleClearForm,loginEmail:e.state.email,loginPassword:e.state.password,errors:e.state.errors}))}}),r.a.createElement(x.a,{path:"/password",render:function(t){return r.a.createElement(Oe,Object.assign({},t,{onFieldChange:e.handleFieldChange,onSelectClear:e.handleClearSelectErrors,resetEmail:e.state.email,errors:e.state.errors}))}}),r.a.createElement(x.a,{path:"/reset/:token",component:xe}),r.a.createElement(x.a,{path:"/spinner",component:te}),r.a.createElement(U,Object.assign({},this.state,{path:"/dashboard",component:Pe}))))))}}]),t}(n.Component);var Fe=Object(f.b)(function(e){return{errors:e.errors,loading:e.loading,auth:e.auth}},{clearErrors:R,createUser:S})(Re);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(f.a,{store:we},r.a.createElement(Fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[142,2,1]]]);
//# sourceMappingURL=main.c97593f6.chunk.js.map